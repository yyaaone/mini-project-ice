#include <SoftwareSerial.h>
SoftwareSerial mySerial(11,10);
const int SpeakerPin = 6;

int NooMaLee[] = {330,294,262,294,330,330,330,294,294,294,330,392,392,330,294,262,294,330,330,330,294,294,330,294,262};
const int numNooMaLee = 25;

int HBD[] = {262,262,294,262,339,330,262,262,294,262,339,330,262,262,523,440,349,330,294,262,494,494,440,349,392,349};
const int numHBD = 26;

int LittleStar[] = {392,392,587,587,659,659,587,523,523,494,494,440,440,392,
                    587,587,523,523,494,494,440,587,587,523,523,494,494,440,
                    392,392,587,587,659,659,587,523,523,494,494,440,440,392};
const int numLittleStar = 42;

int bitPattern[] = {
  0b11111001,  // 1
  0b10100100,  // 2
  0b10110000,  // 3 
};

const byte numPins = 8;
const int segmentPins[9]= {9,8,4,5,7,12,13};

void setup() {
   Serial.begin(9600);
   mySerial.begin(9600);
  
  for (int i=0; i<numPins; i++){
    pinMode(segmentPins[i], OUTPUT);
  }
  pinMode(SpeakerPin, OUTPUT);
}

void loop() {
  if(mySerial.available()){
    String Text = mySerial.readStringUntil('\n');
    Text.trim(); // ตัดช่องว่างและ \r\n ออก
    Serial.println(Text);

    if (Text == "switch1"){
      for (int i=0; i<numPins; i++){
        boolean isBitSet = bitRead(bitPattern[0], i);
        Serial.println(isBitSet);
        digitalWrite(segmentPins[i],isBitSet);
      }
    }
    else if (Text == "switch2"){   // ✅ แก้เป็น ==
      for (int i=0; i<numPins; i++){
        boolean isBitSet = bitRead(bitPattern[1], i);
        Serial.println(isBitSet);
        digitalWrite(segmentPins[i],isBitSet);
      }
    }
    else if (Text == "switch3"){   // ✅ แก้เป็น ==
      for (int i=0; i<numPins; i++){
        boolean isBitSet = bitRead(bitPattern[2], i);
        Serial.println(isBitSet);
        digitalWrite(segmentPins[i],isBitSet);
      }
    }
  }
}
